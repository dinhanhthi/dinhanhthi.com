<!doctype html>
<html lang="en" domain="{{ settings.domain }}">

  {% include "components/head.njk" %}

  <body{% if customClass %} class="{{ customClass }}"{% endif %}>

    <script>
      function showTheme() {
        const btn = document.getElementById("toggle-dark-light");
        let toggleIcon = btn.firstElementChild;
        const currentTheme = localStorage.getItem("theme");
        if (currentTheme === "dark") {
          document
            .body
            .classList
            .toggle("dark-theme");
          toggleIcon.src = "/img_src/nav/sun.svg";
        } else if (currentTheme === "light") {
          document
            .body
            .classList
            .toggle("light-theme");
          toggleIcon.src = "/img_src/nav/moon.svg";
        }
      }
      function showContent() {
        document.body.style.visibility = 'visible';
        document.body.style.opacity = 1;
      }
      window.addEventListener('DOMContentLoaded', (event) => {
        showTheme();
        showContent();
      });
    </script>

    {% set pageUrlLength = page.url | length %}
    <header{% if pageUrlLength > 1 and page.url !== '/about/' %} class="wave-border wave-border-post"{% endif %}>
      {% include "components/navigation.njk" %}
      <div class="header-container">
        {% if layout === 'post' or layout === 'page' %}
          <div class="post-header">
            {% block headerLogo %}{% endblock %}
            {% block headerTitle %}
              <h1>
                {% if specialTitle %}
                  <span class="special-title">{{ specialTitle }}</span>
                {% endif %}
                {% if specialTitleImageUrl %}
                  <span class="special-title"><img width="36" height="36" src="{{ specialTitleImageUrl }}" class="keep-original" alt="hi" ></span>
                {% endif %}
                {{ title }}
                {% if lowQuality %}
                  <sup class="draft-badge">low-quality</sup>
                {% elif notfull %}
                  <sup class="draft-badge">draft</sup>
                {% endif %}
              </h1>
            {% endblock %}
            {% block extraArticleHeader %}{% endblock %}
          </div>
        {% elif layout === 'blog' %}
          <div class="blog-header">
            {% if tags %}
              <div class="blog-tags">
                {% for tag in tags %}
                  {% if tag != "posts" %}
                    <a href="/tags/{{ tag | slug }}/" {% if loop.index %}id="category"{% endif %}}>{{ tag }}</a>
                  {% endif %}
                {% endfor %}
              </div>
            {% endif %}
            <h1 class="blog-title">{{ title }}</h1>
            {% if tags %}
              <div class="blog-description">
                {{ description }}
              </div>
            {% endif %}
            <div class="blog-date">
              Last updated {{ page.date | toDuration }}
              /
              <a href="https://github.com/dinhanhthi/notes/edit/master/{{ page.inputPath | replace('notes/', '') }}">Edit on Github</a>
            </div>
          </div>
        {% endif %}
      </div>
    </header>

    <main
      id="main-wrapper"
      class="
        {% if settings.hideDraftPostsByDefault %}hide-draft-posts{% endif %}
        {% if settings.hidePrivatePostsByDefault %} hide-private-posts{% endif %}
        {% if settings.hideOutsideNotesByDefault %} hide-outside-posts{% endif %}
      ">
      {% block article %}
        {{ content | safe }}
      {% endblock %}
    </main>

    {% include "components/footer.njk" %}

    <a id="buy-me-a-coffee" class="floating-button tooltip" href="/support-thi/">
      <img class="keep-original" src="/img_src/icons/coffee.svg" alt="Support Thi">
      <span class="tooltiptext">Support Thi</span>
    </a>

    <button id="scroll-top-btn" class="floating-button tooltip">
      <img class="keep-original" src="/img_src/to-top.webp" alt="Scroll to top">
      <span class="tooltiptext">Top</span>
    </button>
  </body>
</html>